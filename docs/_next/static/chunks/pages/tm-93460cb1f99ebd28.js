(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514],{1088:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tm",function(){return n(4482)}])},4482:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return V}});var r=n(5893),a=n(7294),i=n(9008),o=n.n(i),s=n(1217),u=n(8949),p=n(9059),c=n(8908);function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},f=3e3;function S(t){return t.map((function(t){return"".concat(t.char,"/").concat(t.replace).concat("L"===t.move?"\u2190":"\u2192")})).join(",")}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"reactivityCounter",0),l(this,"nextStateId",0),l(this,"nextEdgeId",0),l(this,"states",[]),l(this,"graphNodes",[]),l(this,"graphEdges",[]),l(this,"runString","010"),l(this,"modifiedRunString","010"),l(this,"nextRunStringCharIndex",0),l(this,"runStateSequence",[]),l(this,"runCharMoveSequence",[]),l(this,"isRunningStuck",!1),l(this,"currentRunStepCount",0),(0,u.ky)(this,{getStateNameById:!1,getStateTypeById:!1,getEdgeId:!1,getTransitionCharSeqById:!1,isStateNameUnique:!1,isTransitionCharSeqUnique:!1,isTransitionMoveSeqValid:!1})}var e,n,r;return e=t,n=[{key:"isStateNameUnique",value:function(t){return void 0===this.states.find((function(e){return e.name===t}))}},{key:"isTransitionMoveSeqValid",value:function(t){return void 0===t.toUpperCase().split("").find((function(t){return"L"!==t&&"R"!==t}))}},{key:"isTransitionCharSeqUnique",value:function(t,e){var n=e.split(""),r=!0,a=!1,i=void 0;try{for(var o,s=function(t,e){var r=e.value;if(1!=n.reduce((function(t,e){return t+(e===r?1:0)}),0))return{v:[!1,r]}},u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var p=s(0,o);if("object"===h(p))return p.v}}catch(v){a=!0,i=v}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}var c=this.graphEdges.find((function(e){return e.id===t})),d=this.states.find((function(t){return t.id===c.from})),l=!0,f=!1,S=void 0;try{for(var y,g=function(t,n){var r=n.value;if(r.toId===c.to)return"continue";var a=!0,i=!1,o=void 0;try{for(var s,u=function(t,e){var n=e.value;if(r.moves.find((function(t){return t.char===n})))return{v:[!1,n]}},p=e[Symbol.iterator]();!(a=(s=p.next()).done);a=!0){var d=u(0,s);if("object"===h(d))return{v:d.v}}}catch(v){i=!0,o=v}finally{try{a||null==p.return||p.return()}finally{if(i)throw o}}},I=d.transitions[Symbol.iterator]();!(l=(y=I.next()).done);l=!0){var m=g(0,y);if("object"===h(m))return m.v}}catch(v){f=!0,S=v}finally{try{l||null==I.return||I.return()}finally{if(f)throw S}}return[!0,""]}},{key:"getStateNameById",value:function(t){var e=this.states.find((function(e){return e.id===t}));return e?e.name:""}},{key:"getStateTypeById",value:function(t){var e=this.states.find((function(e){return e.id===t}));return e?e.type:c.OC.NORMAL}},{key:"getEdgeId",value:function(t,e){var n=this.graphEdges.find((function(n){return n.from===t&&n.to===e}));return n?n.id:""}},{key:"getTransitionCharSeqById",value:function(t){var e=this.graphEdges.find((function(e){return e.id===t}));if(!e)return["","",""];var n=this.states.find((function(t){return t.id===e.from})).transitions.find((function(t){return t.toId===e.to}));return n?[n.moves.map((function(t){return t.char})).join(""),n.moves.map((function(t){return t.replace})).join(""),n.moves.map((function(t){return t.move})).join("")]:["","",""]}},{key:"minimumUnoccupiedStateId",get:function(){for(var t=this,e=function(e){if(void 0===t.states.find((function(t){return t.id===e})))return{v:e}},n=0;n<=this.nextStateId;n++){var r=e(n);if("object"===h(r))return r.v}}},{key:"hasStartState",get:function(){return void 0!==this.states.find((function(t){return t.type===c.OC.START}))}},{key:"currentRunState",get:function(){var t;return null!==(t=this.runStateSequence[this.runStateSequence.length-1])&&void 0!==t?t:{name:""}}},{key:"isAutomataEmpty",get:function(){return 0===this.states.length}},{key:"isStepLimitExceeded",get:function(){return this.currentRunStepCount>f}},{key:"setGraphNodeGroup",value:function(t,e){this.graphNodes.find((function(e){return e.id===t.id})).group=(0,c.Nz)(t.type,e)}},{key:"setRunString",value:function(t){this.runString=t,this.modifiedRunString=t}},{key:"initRun",value:function(){this.modifiedRunString=this.runString,this.nextRunStringCharIndex=0,this.runStateSequence=[this.states.find((function(t){return t.type===c.OC.START}))],this.runCharMoveSequence=[],this.setGraphNodeGroup(this.currentRunState,!0),this.isRunningStuck=!1,this.currentRunStepCount=0}},{key:"runExit",value:function(){this.setGraphNodeGroup(this.currentRunState,!1)}},{key:"runSingleStep",value:function(){if(!(this.nextRunStringCharIndex>this.modifiedRunString.length-1)&&this.currentRunState.type!==c.OC.FINAL&&!this.isRunningStuck&&!this.isStepLimitExceeded){this.currentRunStepCount++;var t=!0,e=!0,n=!1,r=void 0;try{for(var a,i=this.currentRunState.transitions[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,s=!1,u=!0,p=!1,d=void 0;try{for(var l,h=o.moves[Symbol.iterator]();!(u=(l=h.next()).done);u=!0){var f=l.value;if(f.char===this.modifiedRunString[this.nextRunStringCharIndex]){this.setGraphNodeGroup(this.currentRunState,!1),this.runStateSequence.push(this.states.find((function(t){return t.id===o.toId}))),this.runCharMoveSequence.push({char:f.char,move:f.move}),this.setGraphNodeGroup(this.currentRunState,!0);var S=this.modifiedRunString.split("");S[this.nextRunStringCharIndex]=f.replace,this.modifiedRunString=S.join(""),"L"===f.move?this.nextRunStringCharIndex--:this.nextRunStringCharIndex++,t=!1;var y=this.modifiedRunString.length;this.nextRunStringCharIndex>y-1?this.modifiedRunString+="B".repeat(this.nextRunStringCharIndex-y+1):this.nextRunStringCharIndex<0&&(this.modifiedRunString="B".repeat(-this.nextRunStringCharIndex)+this.modifiedRunString,this.nextRunStringCharIndex=0),s=!0;break}}}catch(g){p=!0,d=g}finally{try{u||null==h.return||h.return()}finally{if(p)throw d}}if(s)break}}catch(g){n=!0,r=g}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}this.isRunningStuck=t}}},{key:"runToEnd",value:function(){if(!(this.nextRunStringCharIndex>this.modifiedRunString.length-1)){for(;this.currentRunState.type!==c.OC.FINAL&&!this.isRunningStuck;){if(this.isStepLimitExceeded)return this.runReset(),!0;this.runSingleStep()}return!1}}},{key:"runSingleBack",value:function(){if(0!==this.runCharMoveSequence.length){this.setGraphNodeGroup(this.currentRunState,!1),this.runStateSequence.pop(),this.setGraphNodeGroup(this.currentRunState,!0),this.isRunningStuck=!1,"L"===this.runCharMoveSequence[this.runCharMoveSequence.length-1].move?this.nextRunStringCharIndex++:this.nextRunStringCharIndex--;var t=this.modifiedRunString.split("");t[this.nextRunStringCharIndex]=this.runCharMoveSequence[this.runCharMoveSequence.length-1].char,this.modifiedRunString=t.join(""),this.runCharMoveSequence.pop(),this.currentRunStepCount--}}},{key:"runReset",value:function(){this.setGraphNodeGroup(this.currentRunState,!1),this.nextRunStringCharIndex=0,this.runStateSequence=[this.states.find((function(t){return t.type===c.OC.START}))],this.runCharMoveSequence=[],this.setGraphNodeGroup(this.currentRunState,!0),this.modifiedRunString=this.runString,this.isRunningStuck=!1,this.currentRunStepCount=0}},{key:"loadData",value:function(t,e,n,r,a){this.nextStateId=t,this.nextEdgeId=e,this.states=n,this.graphNodes=r,this.graphEdges=a,this.reactivityCounter=0}},{key:"clearAll",value:function(){this.nextStateId=0,this.nextEdgeId=0,this.states=[],this.graphNodes=[],this.graphEdges=[],this.reactivityCounter=0}},{key:"addState",value:function(t,e,n,r){this.states.push({id:this.nextStateId,name:t,type:e,transitions:[]}),this.graphNodes.push({id:this.nextStateId,label:t,group:(0,c.Nz)(e),x:n,y:r}),this.nextStateId++,this.reactivityCounter++}},{key:"addTransition",value:function(t,e,n,r,a){var i=this.states.find((function(e){return e.id===t})).transitions,o=i.find((function(t){return t.toId===e}));if(o){for(var s=0;s<n.length;s++)o.moves.push({char:n[s],replace:r[s],move:a[s]});this.graphEdges.find((function(n){return n.from===t&&n.to===e})).label=S(o.moves)}else{for(var u=[],p=0;p<n.length;p++)u.push({char:n[p],replace:r[p],move:a[p]});i.push({toId:e,moves:u});var c={id:this.nextEdgeId.toString(),from:t,to:e,label:S(u)};this.graphEdges.find((function(n){return n.from===e&&n.to===t}))&&(c.smooth={type:"curvedCW"}),this.graphEdges.push(c),this.nextEdgeId++}this.reactivityCounter++}},{key:"editState",value:function(t,e,n,r,a){var i=this.states.find((function(e){return e.id===t})),o=this.graphNodes.find((function(e){return e.id===t}));null!=e&&(i.name=e,o.label=e),null!=n&&(i.type=n,o.group=(0,c.Nz)(n)),null!=r&&(o.x=r),null!=a&&(o.y=a),this.reactivityCounter++}},{key:"editTransition",value:function(t,e,n,r){for(var a=this.graphEdges.find((function(e){return e.id===t})),i=[],o=0;o<e.length;o++)i.push({char:e[o],replace:n[o],move:r[o]});a.label=S(i),this.states.find((function(t){return t.id===a.from})).transitions.find((function(t){return t.toId===a.to})).moves=i,this.reactivityCounter++}},{key:"removeState",value:function(t){for(var e=this.states.length-1;e>=0;e--)if(this.states[e].id===t)this.states.splice(e,1);else for(var n=this.states[e].transitions.length-1;n>=0;n--)this.states[e].transitions[n].toId===t&&this.states[e].transitions.splice(n,1);this.graphNodes.splice(this.graphNodes.findIndex((function(e){return e.id===t})),1);for(var r=this.graphEdges.length-1;r>=0;r--)this.graphEdges[r].from!==t&&this.graphEdges[r].to!==t||this.graphEdges.splice(r,1);this.reactivityCounter++}},{key:"removeTransition",value:function(t){var e=this.graphEdges.splice(this.graphEdges.findIndex((function(e){return e.id===t})),1)[0],n=this.graphEdges.find((function(t){return t.from===e.to&&t.to===e.from}));n&&delete n.smooth;var r=this.states.find((function(t){return t.id===e.from}));r.transitions.splice(r.transitions.findIndex((function(t){return t.toId===e.to})),1),this.reactivityCounter++}}],n&&d(e.prototype,n),r&&d(e,r),t}(),g=n(276),I=n(2662),m=n(6173),v=n(8145),T=n(4184),E=n.n(T),x=n(66),A=n.n(x),N=n(5291),R=n.n(N),C=void 0,D=function(t,e,n){switch(t.currentState){case p.y.EDIT_STATE:if(0===e.editorInputTexts[0].length)return void e.showInvalidInputWarning("\u72b6\u6001\u540d\u4e0d\u80fd\u4e3a\u7a7a");if(!n.isStateNameUnique(e.editorInputTexts[0]))return void e.showInvalidInputWarning("\u72b6\u6001\u540d\u5df2\u7ecf\u5b58\u5728");e.hideInvalidInputWarning();break;case p.y.EDIT_TRANSITION:if(0===e.editorInputTexts[0].length)return void e.showInvalidInputWarning("\u8f93\u5165\u5b57\u7b26\u5217\u8868\u4e0d\u80fd\u4e3a\u7a7a");var r=n.isTransitionCharSeqUnique(e.selectedGraphEdgeId,e.editorInputTexts[0]);if(!r[0])return void e.showInvalidInputWarning("\u5df2\u7ecf\u6709\u5b57\u7b26".concat(r[1],"\u7684\u8f6c\u79fb"));if(!e.isEditorInputTextsLengthEqual)return void e.showInvalidInputWarning("\u8f93\u5165\u6570\u636e\u957f\u5ea6\u4e0d\u76f8\u7b49");if(!n.isTransitionMoveSeqValid(e.editorInputTexts[2]))return void e.showInvalidInputWarning('\u79fb\u52a8\u5e8f\u5217\u53ea\u80fd\u5305\u542b\u5b57\u7b26"LRlr"');e.hideInvalidInputWarning()}},b=(0,s.Pi)((function(t){var e=function(e){t.propertyEditorData.setSelectedStateType(e)};return(0,r.jsxs)("div",{id:"property-editor-wrapper",className:E()(t.className,A().propertyEditorWrapper,"d-flex align-items-center"),style:t.style,children:[!(0,m.K)()&&(0,r.jsx)("i",{className:E()(A().iDragArea,"fa-solid fa-ellipsis-vertical"),draggable:!0,onDragStart:function(e){e.stopPropagation(),t.propertyEditorData.propertyEditorOrigTop=t.propertyEditorData.propertyEditorTop,t.propertyEditorData.propertyEditorOrigLeft=t.propertyEditorData.propertyEditorLeft,t.propertyEditorData.dragStartX=e.clientX,t.propertyEditorData.dragStartY=e.clientY},onDrag:function(e){e.stopPropagation();var n=t.propertyEditorData.propertyEditorOrigTop+e.clientY-t.propertyEditorData.dragStartY,r=t.propertyEditorData.propertyEditorOrigLeft+e.clientX-t.propertyEditorData.dragStartX;t.propertyEditorData.propertyEditorTop!==n&&t.propertyEditorData.propertyEditorLeft!==r&&0!==e.clientX&&0!==e.clientY&&(t.propertyEditorData.setPropertyEditorPosition(n,r,!1),(0,m.t)(t.appState,t.propertyEditorData,!1))}}),(0,r.jsx)("label",{className:A().lblTransitionCharsTip,style:{display:t.appState.currentState===p.y.EDIT_TRANSITION?"block":"none"},children:"\u591a\u4e2a\u8f93\u5165\u5b57\u7b26\u8bf7\u8fde\u7eed\u8f93\u5165, \u598201"}),(0,r.jsx)("input",{className:t.appState.currentState===p.y.EDIT_STATE?A().inPropertyInput:R().inPropertyInput,style:t.propertyEditorData.isInvalidInputWarningShow?{borderColor:"red",color:"red"}:{},type:"text",value:t.propertyEditorData.editorInputTexts[0],onInput:function(e){t.propertyEditorData.setEditorInputText(e.target.value,0),D(t.appState,t.propertyEditorData,t.tmInstance)}}),t.appState.currentState===p.y.EDIT_TRANSITION&&(0,r.jsx)("input",{className:R().inPropertyInput,style:t.propertyEditorData.isInvalidInputWarningShow?{borderColor:"red",color:"red"}:{},type:"text",value:t.propertyEditorData.editorInputTexts[1],onInput:function(e){t.propertyEditorData.setEditorInputText(e.target.value,1),D(t.appState,t.propertyEditorData,t.tmInstance)}}),t.appState.currentState===p.y.EDIT_TRANSITION&&(0,r.jsx)("input",{className:R().inMoveSeqInput,style:t.propertyEditorData.isInvalidInputWarningShow?{borderColor:"red",color:"red"}:{},type:"text",value:t.propertyEditorData.editorInputTexts[2],onInput:function(e){t.propertyEditorData.setEditorInputText(e.target.value,2),D(t.appState,t.propertyEditorData,t.tmInstance)}}),(0,r.jsx)("label",{className:A().lblInvalidInputInfo,style:{display:t.propertyEditorData.isInvalidInputWarningShow?"block":"none"},children:t.propertyEditorData.invalidInputWarningText}),(0,r.jsxs)("span",{className:A().spanStateTypeGroup,style:{display:t.appState.currentState===p.y.EDIT_STATE?"inline":"none"},children:[(0,r.jsxs)("div",{className:"d-flex align-items-center",onClick:e.bind(C,c.OC.START),children:[(0,r.jsx)("input",{className:A().inStateType,type:"radio",name:"inStateType",readOnly:!0,checked:t.propertyEditorData.selectedStateType===c.OC.START}),(0,r.jsx)("label",{className:A().lblStateType,children:"\u5f00\u59cb"})]}),(0,r.jsxs)("div",{className:"d-flex align-items-center",onClick:e.bind(C,c.OC.NORMAL),children:[(0,r.jsx)("input",{className:A().inStateType,type:"radio",name:"inStateType",readOnly:!0,checked:t.propertyEditorData.selectedStateType===c.OC.NORMAL}),(0,r.jsx)("label",{className:A().lblStateType,children:"\u666e\u901a"})]}),(0,r.jsxs)("div",{className:"d-flex align-items-center",onClick:e.bind(C,c.OC.FINAL),children:[(0,r.jsx)("input",{className:A().inStateType,type:"radio",name:"inStateType",readOnly:!0,checked:t.propertyEditorData.selectedStateType===c.OC.FINAL}),(0,r.jsx)("label",{className:A().lblStateType,children:"\u63a5\u6536"})]})]}),(0,r.jsx)("span",{className:E()(A().spanConfirmWrapper,"d-flex justify-content-center align-items-center"),onClick:function(){if(!t.propertyEditorData.isInvalidInputWarningShow){switch(t.appState.currentState){case p.y.EDIT_STATE:t.tmInstance.editState(t.propertyEditorData.selectedGraphNodeId,t.propertyEditorData.editorInputTexts[0],t.propertyEditorData.selectedStateType,void 0,void 0);break;case p.y.EDIT_TRANSITION:t.tmInstance.editTransition(t.propertyEditorData.selectedGraphEdgeId,t.propertyEditorData.editorInputTexts[0],t.propertyEditorData.editorInputTexts[1],t.propertyEditorData.editorInputTexts[2].toUpperCase())}t.appState.changeAppState(p.y.DEFAULT)}},children:(0,r.jsx)("i",{className:"fa-solid fa-check"})}),(0,r.jsx)("span",{className:E()(A().spanCancelWrapper,"d-flex justify-content-center align-items-center"),onClick:function(){t.propertyEditorData.hideInvalidInputWarning(),t.appState.changeAppState(p.y.DEFAULT)},children:(0,r.jsx)("i",{className:"fa-solid fa-xmark"})})]})})),k=n(9298),j=n(3884),O=n(7860),w=n.n(O),_=(0,s.Pi)((function(t){return(0,r.jsxs)("div",{className:E()(t.className,w().divRunPanelWrapper),style:t.style,children:[(0,r.jsxs)("div",{className:E()(w().divRunControlsWrapper,"d-flex justify-content-evenly"),children:[(0,r.jsx)("i",{className:E()(w().iRunControl,"fa-solid fa-arrow-rotate-right"),onClick:function(e){e.stopPropagation(),t.tmInstance.runReset()}}),(0,r.jsx)("i",{className:E()(w().iRunControl,"fa-solid fa-backward-step"),onClick:function(e){e.stopPropagation(),t.tmInstance.runSingleBack()}}),(0,r.jsx)("i",{className:E()(w().iRunControl,"fa-solid fa-forward-step"),onClick:function(e){e.stopPropagation(),t.tmInstance.runSingleStep(),t.tmInstance.isRunningStuck&&(t.alertData.isAlertShow||t.alertData.showAlertAnimated("\u56fe\u7075\u673a\u5904\u4e8e\u5361\u6b7b\u72b6\u6001")),t.tmInstance.isStepLimitExceeded&&(t.alertData.isAlertShow||t.alertData.showAlertAnimated("\u5df2\u8d85\u8fc7\u6700\u5927\u6b65\u6570\u9650\u5236(".concat(f,")")))}}),(0,r.jsx)("i",{className:E()(w().iRunControl,"fa-solid fa-forward-fast"),onClick:function(e){e.stopPropagation();var n=t.tmInstance.runToEnd();t.tmInstance.isRunningStuck&&(t.alertData.isAlertShow||t.alertData.showAlertAnimated("\u56fe\u7075\u673a\u5904\u4e8e\u5361\u6b7b\u72b6\u6001")),n&&(t.alertData.isAlertShow||t.alertData.showAlertAnimated("\u5df2\u8d85\u8fc7\u6700\u5927\u6b65\u6570\u9650\u5236(".concat(f,")")))}}),(0,r.jsx)("i",{className:E()(w().iRunControlClose,"fa-solid fa-xmark"),onClick:function(e){e.stopPropagation(),t.tmInstance.runExit(),t.appState.changeAppState(p.y.DEFAULT)}})]}),(0,r.jsxs)("div",{className:E()(w().divLowerPartWrapper,"d-flex"),children:[(0,r.jsxs)("span",{className:E()(w().spanLowerLeftPartWrapper,"d-flex flex-column justify-content-center"),children:[(0,r.jsx)("div",{className:E()(w().divStringWrapper,"d-flex flex-wrap"),children:t.tmInstance.modifiedRunString.split("").map((function(e,n){return(0,r.jsx)("span",{className:n===t.tmInstance.nextRunStringCharIndex?w().spanStringCharConsumed:w().spanStringChar,children:e},n)}))}),(0,r.jsx)("div",{className:w().divStringInputWrapper,children:(0,r.jsx)("input",{className:w().inString,value:t.tmInstance.runString,onInput:function(e){t.tmInstance.runExit(),t.tmInstance.setRunString(e.target.value),t.tmInstance.initRun()}})})]}),(0,r.jsxs)("span",{className:E()(w().spanLowerRightPartWrapper,"d-flex flex-column justify-content-center align-items-center"),children:[(0,r.jsxs)("span",{className:w().spanCurrentStateLabel,children:[t.tmInstance.runStateSequence.length-1,"\u6b65"]}),(0,r.jsx)("span",{className:w().spanCurrentStateLabel,children:"\u5f53\u524d\u72b6\u6001"}),(0,r.jsx)("span",{className:E()(w().spanCurrentStateWrapper,"d-flex justify-content-center align-items-center"),children:(0,r.jsx)("span",{className:w().spanCurrentState,style:{borderStyle:t.tmInstance.currentRunState.type===c.OC.START?"dotted":t.tmInstance.currentRunState.type===c.OC.FINAL?"double":"solid",borderWidth:t.tmInstance.currentRunState.type===c.OC.FINAL?5:2,backgroundColor:t.tmInstance.currentRunState.type===c.OC.START?j.bg:t.tmInstance.currentRunState.type===c.OC.FINAL?j.aG:j.Az},children:t.tmInstance.currentRunState.name})})]})]})]})})),P=n(6627);var L=n(4403),q=n.n(L),G=n(4105),W=n.n(G);function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return!e||"object"!==z(e)&&"function"!==typeof e?U(t):e}function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function Y(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=B(t);if(e){var a=B(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return F(this,n)}}var V=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&X(t,e)}(n,t);var e=Y(n);function n(t){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),M(U(a=e.call(this,t)),"isAutomataEmpty",(function(){return a.pageTmInstance.isAutomataEmpty})),M(U(a),"loadAutomataJsonString",(function(t){(0,v.gy)(t,a.pageTmInstance)})),M(U(a),"exportAutomataJsonString",(function(){return a.pageTmInstance.isAutomataEmpty?(a.pageAlertData.showAlertAnimated("\u56fe\u7075\u673a\u4e3a\u7a7a"),null):(a.pageAppState.currentState===p.y.RUN_AUTOMATA&&(a.pageTmInstance.runExit(),a.pageAppState.changeAppState(p.y.DEFAULT)),(0,v.M0)(a.pageTmInstance))})),M(U(a),"clearAll",(function(){a.pageAppState.changeAppState(p.y.DEFAULT),a.pageTmInstance.clearAll()})),M(U(a),"componentDidMount",(function(){(0,P.BX)(document.getElementById("div-canvas-wrapper"),(function(t){!function(t,e,n,r){switch(e.currentState){case p.y.DEFAULT:if(t.nodes.length>0)r.setSelectedGraphNodeId(t.nodes[0]),r.setEditorInputText(n.getStateNameById(r.selectedGraphNodeId),0),r.setSelectedStateType(n.getStateTypeById(r.selectedGraphNodeId)),r.setPropertyEditorPosition(t.event.center.y,t.event.center.x,!1),e.changeAppState(p.y.EDIT_STATE);else if(t.edges.length>0){r.setSelectedGraphEdgeId(t.edges[0]);for(var a=n.getTransitionCharSeqById(r.selectedGraphEdgeId),i=0;i<a.length;i++)r.setEditorInputText(a[i],i);e.changeAppState(p.y.EDIT_TRANSITION),D(e,r,n),r.setPropertyEditorPosition(t.event.center.y,t.event.center.x,!1)}break;case p.y.ADD_STATE_SELECT_POSITION:var o="q".concat(n.minimumUnoccupiedStateId),s=0==n.states.length?c.OC.START:c.OC.NORMAL;n.addState(o,s,t.pointer.canvas.x,t.pointer.canvas.y),r.setSelectedGraphNodeId(n.nextStateId-1),r.setEditorInputText(n.getStateNameById(r.selectedGraphNodeId),0),r.setSelectedStateType(n.getStateTypeById(r.selectedGraphNodeId)),r.setPropertyEditorPosition(t.event.center.y,t.event.center.x,!1),e.changeAppState(p.y.EDIT_STATE);break;case p.y.EDIT_STATE:case p.y.EDIT_TRANSITION:r.clearPropertyEditor(),e.changeAppState(p.y.DEFAULT);break;case p.y.ADD_TRANSITION_SELECT_ORIG:t.nodes.length>0&&(r.setSelectedGraphNodeId(t.nodes[0]),e.changeAppState(p.y.ADD_TRANSITION_SELECT_DEST));break;case p.y.ADD_TRANSITION_SELECT_DEST:if(t.nodes.length>0){n.addTransition(r.selectedGraphNodeId,t.nodes[0],"0","X","R"),r.setSelectedGraphEdgeId(n.getEdgeId(r.selectedGraphNodeId,t.nodes[0]));for(var u=n.getTransitionCharSeqById(r.selectedGraphEdgeId),d=0;d<u.length;d++)r.setEditorInputText(u[d],d);e.changeAppState(p.y.EDIT_TRANSITION),D(e,r,n),r.setPropertyEditorPosition(t.event.center.y,t.event.center.x,!1)}case p.y.RUN_AUTOMATA:}}(t,a.pageAppState,a.pageTmInstance,a.pagePropertyEditorData)}),(function(t){!function(t,e,n,r){if(t.nodes.length>0){var a=(0,P.H0)(t.nodes[0]);n.editState(t.nodes[0],void 0,void 0,a.x,a.y)}switch(e.currentState){case p.y.EDIT_STATE:case p.y.EDIT_TRANSITION:(t.nodes.length>0||t.edges.length>0)&&(r.setPropertyEditorPosition(t.event.center.y,t.event.center.x,!1),(0,m.t)(e,r))}}(t,a.pageAppState,a.pageTmInstance,a.pagePropertyEditorData)})),(0,u.EH)((function(){(0,P.A9)(a.pageTmInstance.graphNodes,a.pageTmInstance.graphEdges,a.pageTmInstance.reactivityCounter)}))})),M(U(a),"componentDidUpdate",(function(){(0,m.t)(a.pageAppState,a.pagePropertyEditorData)})),M(U(a),"removeSelected",(function(){switch(a.pageAppState.currentState){case p.y.EDIT_STATE:a.pageTmInstance.removeState(a.pagePropertyEditorData.selectedGraphNodeId),a.pageAppState.changeAppState(p.y.DEFAULT);break;case p.y.EDIT_TRANSITION:a.pageTmInstance.removeTransition(a.pagePropertyEditorData.selectedGraphEdgeId),a.pageAppState.changeAppState(p.y.DEFAULT)}})),M(U(a),"runAutomata",(function(){a.pageTmInstance.hasStartState?(a.pageAppState.changeAppState(p.y.RUN_AUTOMATA),a.pageTmInstance.initRun()):a.pageAlertData.showAlertAnimated("\u56fe\u7075\u673a\u6ca1\u6709\u5f00\u59cb\u72b6\u6001")})),M(U(a),"pageTmInstance",new y),M(U(a),"pageAppState",new p.a),M(U(a),"pagePropertyEditorData",new g.y),M(U(a),"pageAlertData",new I.k),M(U(a),"pageComponent",(0,s.Pi)((function(t){var e=t.tmInstance,n=t.appState,i=t.propertyEditorData,s=t.alertData;return(0,r.jsxs)("main",{className:q().mainContentWrapper,children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"Automata Playground - TM"})}),(0,r.jsx)("div",{className:W().divAlert,role:"alert",style:{display:s.isAlertShow?"block":"none",opacity:s.alertOpacity},children:s.alertMessage}),(n.currentState===p.y.EDIT_STATE||n.currentState===p.y.EDIT_TRANSITION)&&(0,r.jsx)(b,{appState:n,tmInstance:e,propertyEditorData:i,className:q().dfaPropertyEditor,style:{top:i.isPropertyEditorPositionAdjusted?i.propertyEditorTop:0,left:i.isPropertyEditorPositionAdjusted?i.propertyEditorLeft:0}}),(0,r.jsx)(k.Z,{appState:n,removeSelected:a.removeSelected,runAutomata:a.runAutomata,className:q().bottomToolbar,style:{display:n.currentState===p.y.RUN_AUTOMATA?"none":"block"}}),(0,r.jsx)(_,{appState:n,tmInstance:e,alertData:s,className:q().bottomToolbar,style:{display:n.currentState===p.y.RUN_AUTOMATA?"block":"none"}}),(0,r.jsx)("div",{id:"div-canvas-wrapper",className:q().divCanvasWrapper})]})}))),M(U(a),"render",(function(){return(0,r.jsx)(a.pageComponent,{tmInstance:a.pageTmInstance,appState:a.pageAppState,propertyEditorData:a.pagePropertyEditorData,alertData:a.pageAlertData})})),a}return n}(a.Component)},5291:function(t){t.exports={inPropertyInput:"tm-property-editor_inPropertyInput__WVlOk",inMoveSeqInput:"tm-property-editor_inMoveSeqInput__3I_zz"}}},function(t){t.O(0,[814,959,461,556,681,774,888,179],(function(){return e=1088,t(t.s=e);var e}));var e=t.O();_N_E=e}]);